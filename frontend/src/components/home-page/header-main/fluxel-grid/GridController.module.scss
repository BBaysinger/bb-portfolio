.gridController {
  display: flex;
  align-items: center;
  justify-content: center;
  aspect-ratio: 4/3;
  width: var(--responsive-scaler-width);
  height: var(--responsive-scaler-height);
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  position: relative;
}

.animationSequencer {
  position: absolute;
  aspect-ratio: 4/3;
  width: 100%;
  height: 100%;
}

.fluxelGridCanvas {
  position: absolute;
  aspect-ratio: 4/3;
  mix-blend-mode: multiply;
}

.projectilesOverlay {
  z-index: 2;
}

.gridLinesOverlay {
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  mix-blend-mode: multiply;

  --grid-line-thickness: 2px;
  --grid-line-color: rgba(0, 0, 0, 0.75);

  // One-element grid line overlay: two repeating gradients (vertical + horizontal).
  // Variables are set inline from GridController based on fluxel size and centering offsets.
  // Additional browser offsets account for Safari rendering quirks.
  background-image:
    linear-gradient(
      to right,
      var(--grid-line-color) var(--grid-line-thickness),
      transparent var(--grid-line-thickness)
    ),
    linear-gradient(
      to bottom,
      var(--grid-line-color) var(--grid-line-thickness),
      transparent var(--grid-line-thickness)
    );
  background-repeat: repeat;
  background-size: var(--grid-cell-size) var(--grid-cell-size);
  background-position: calc(
      var(--grid-offset-x, 0px) +
        var(--grid-cell-size) - var(--grid-line-thickness) / 2 +
        var(--grid-browser-offset-x, 0px)
    )
    calc(
      var(--grid-offset-y, 0px) +
        var(--grid-cell-size) - var(--grid-line-thickness) / 2 +
        var(--grid-browser-offset-y, 0px)
    );
}
